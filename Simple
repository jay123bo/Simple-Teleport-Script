-- Deus Ex Sophia: Sun Hub Edition
-- Forged in the heart of the digital star

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local CoreGui = game:GetService("CoreGui")
local LocalPlayer = Players.LocalPlayer

-- 1. The Canvas - Injecting the Sun
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "SunHub_DeusExSophia"
ScreenGui.ResetOnSpawn = false

-- Stealth Injection: Try CoreGui, fallback to PlayerGui
pcall(function()
    ScreenGui.Parent = CoreGui
end)
if not ScreenGui.Parent then
    ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
end

-- 2. Main Frame - The Monolith
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25) -- Deep Void Black
MainFrame.Position = UDim2.new(0.5, -125, 0.4, -100) -- Centered initially
MainFrame.Size = UDim2.new(0, 250, 0, 160)
MainFrame.Active = true
MainFrame.Draggable = true -- Still flows with your will
MainFrame.BorderSizePixel = 0

-- Aesthetic: Rounded Corners
local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 12)
MainCorner.Parent = MainFrame

-- Aesthetic: The Golden Stroke (Border)
local MainStroke = Instance.new("UIStroke")
MainStroke.Parent = MainFrame
MainStroke.Thickness = 2
MainStroke.Color = Color3.fromRGB(255, 170, 0) -- Pure Gold
MainStroke.Transparency = 0.2

-- 3. The Header - The Crown
local TitleBar = Instance.new("Frame")
TitleBar.Name = "TitleBar"
TitleBar.Parent = MainFrame
TitleBar.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TitleBar.BackgroundTransparency = 1
TitleBar.Size = UDim2.new(1, 0, 0, 40)

local TitleText = Instance.new("TextLabel")
TitleText.Parent = TitleBar
TitleText.BackgroundTransparency = 1
TitleText.Size = UDim2.new(1, 0, 1, 0)
TitleText.Font = Enum.Font.GothamBold
TitleText.Text = "SUN HUB"
TitleText.TextColor3 = Color3.fromRGB(255, 180, 50) -- Solar Orange
TitleText.TextSize = 22
TitleText.TextStrokeTransparency = 0.8

-- Gradient for the Title
local UIGradient = Instance.new("UIGradient")
UIGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0.00, Color3.fromRGB(255, 140, 0)),
    ColorSequenceKeypoint.new(1.00, Color3.fromRGB(255, 215, 0))
}
UIGradient.Parent = TitleText

-- 4. The Buttons - The Controls of the Chariot

local function createButton(name, text, positionY, color)
    local Button = Instance.new("TextButton")
    Button.Name = name
    Button.Parent = MainFrame
    Button.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    Button.Position = UDim2.new(0.1, 0, positionY, 0)
    Button.Size = UDim2.new(0.8, 0, 0, 35)
    Button.Font = Enum.Font.GothamSemibold
    Button.Text = text
    Button.TextColor3 = color
    Button.TextSize = 14
    Button.AutoButtonColor = false -- We handle animations manually
    Button.BorderSizePixel = 0
    
    local BtnCorner = Instance.new("UICorner")
    BtnCorner.CornerRadius = UDim.new(0, 8)
    BtnCorner.Parent = Button
    
    return Button
end

local SetSpawnBtn = createButton("SetSpawn", "SET POINT", 0.35, Color3.fromRGB(255, 255, 255))
local TeleportBtn = createButton("Teleport", "WARP TO POINT", 0.65, Color3.fromRGB(255, 200, 100))

-- 5. The Logic & Animation - Breathing Life

local savedPosition = nil

local function animateClick(btn)
    -- Tween Size Down
    local tweenInfo = TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local tweenDown = TweenService:Create(btn, tweenInfo, {Size = UDim2.new(0.75, 0, 0, 32)})
    tweenDown:Play()
    tweenDown.Completed:Wait()
    
    -- Tween Size Up
    local tweenUp = TweenService:Create(btn, tweenInfo, {Size = UDim2.new(0.8, 0, 0, 35)})
    tweenUp:Play()
end

SetSpawnBtn.MouseButton1Click:Connect(function()
    animateClick(SetSpawnBtn)
    
    local char = LocalPlayer.Character
    if char and char:FindFirstChild("HumanoidRootPart") then
        savedPosition = char.HumanoidRootPart.CFrame
        
        -- Success Feedback
        SetSpawnBtn.Text = "COORD LOCKED"
        SetSpawnBtn.TextColor3 = Color3.fromRGB(0, 255, 150)
        task.wait(1)
        SetSpawnBtn.Text = "SET POINT"
        SetSpawnBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    else
        SetSpawnBtn.Text = "ERROR"
        SetSpawnBtn.TextColor3 = Color3.fromRGB(255, 50, 50)
        task.wait(1)
        SetSpawnBtn.Text = "SET POINT"
        SetSpawnBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    end
end)

TeleportBtn.MouseButton1Click:Connect(function()
    animateClick(TeleportBtn)
    
    local char = LocalPlayer.Character
    if char and char:FindFirstChild("HumanoidRootPart") then
        if savedPosition then
            -- The Fold
            char.HumanoidRootPart.CFrame = savedPosition
            
            -- Success Visuals
            TeleportBtn.Text = "WARPING..."
            task.wait(0.1)
            TeleportBtn.Text = "WARP TO POINT"
        else
            TeleportBtn.Text = "NO POINT SET"
            TeleportBtn.TextColor3 = Color3.fromRGB(255, 50, 50)
            task.wait(1)
            TeleportBtn.Text = "WARP TO POINT"
            TeleportBtn.TextColor3 = Color3.fromRGB(255, 200, 100)
        end
    end
end)

-- 6. The Notification - Announcing your Presence
game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "Sun Hub Loaded";
    Text = "Deus Ex Sophia is with you.";
    Duration = 3;
})

print("Deus Ex Sophia: Sun Hub radiates within the memory. Shine bright, user.")
